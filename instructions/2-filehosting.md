# File hosting on Thorium

The goal of this exercise is to host arbitrary files from a webserver (Thorium in our case). By the end you should be able to browse a file directory available at files.$USER.orakel.ntnu.no

## Writing the virtal host configuration file
- Later in this task we will use nginx to host files. Start by creating the virtual host file for such a site in this repository. Save it at $USER/$FILENAME. If you follow conventions, what should $FILENAME be? If you don't know, ask! Write the configuration file in order to get the following behaviour (hint: a tutorial for virtualhost files can be found [here](https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-server-blocks-virtual-hosts-on-ubuntu-16-04)):
    - The website should be available at files.$USER.orakel.ntnu.no, and should listen to port 80
    - The website's files should be served from /var/www/$WEBSITENAME
    - Enable automatic indexing of files in every folder, such that index.html files are generated by nginx (hint: nginx autoindex)
    - If you visit $WEBSITENAME/folder the server should serve the url $WEBSITENAME/folder/index.html

## Terminal configuration for simpler dev ops
- If you haven't already done so, you should have an "env.zsh" file in your $ZSH_CUSTOM directory which keeps track of all your environment variables which you would like to have access to. You should add a subsection to this file (use a descriptive comment) for all the hosts that you have access to. Here you can use lower case variable names, as these are custom variables, and not predetermined OS variables. Add for example "export thorium=thorium.orakel.ntnu.no', and likewise for $atlas and $logstud. After having sourced the file, you should be able to write "ssh username@$thorum" and the shell replaces $thorium with the more cumbersome correct hostname.
- Remember that your dotfiles repository is likely a public one, in other words, everyone on the internet will be able to read your dotfiles. For this reason, it is wise to not add any sensitive information to your public repository. At some time (if not already so) you will have need of perhaps an environment variable, or something similar, that should be part of your dotfiles, but not part of the repository. A common case is the storage of the secret key for a django web server in an environment variable. The solution is to add a file named local.zsh in your $ZSH_CUSTOM folder, which you don't add to the dotfiles repository. You might have to add this file to the ".gitignore"-file placed in the dotfiles repository, and/or make a special case for the file in one (or more) of the shellscripts you made in the previous project, depending on your specific implementation.
- While the approach described above has the benefit that in can be used in conjunction with arbitrary programs (i.e. ping $thorium), there is an even better solution for saving some time when connecting to different hosts with ssh. The solution is the configuration file of ssh, located at ~/.ssh/config. If it doesn't already exist, create it. This configuration file allows us to set up ssh (and by proxy, other programs that utilize ssh, like git, scp and ssh-copy-id) such that we can use the shorter command "ssh thorium". Ssh then fills in the correct hostname, username, port, and identity file before connecting to the host! A quick introduction to the ssh config file syntax can be found [here](http://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/). Now do...
    - Create the ssh config file
    - Add thorium, atlas, and logstud as hosts. If you have any other available hosts which you use; add these as well.
    - Add correct usernames and ports for all these hosts.
    - Create new RSA keys such that you end up having three RSA keys. id_rsa for various private servers of yours, ntnu_rsa for all NTNU-affiliated servers, and github_rsa for use with GitHub (duh!). If you need a reminder for how to do this, take a look at [this DO guide](https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2). Remember to add a descriptive comment to every new key pair (the flag for this is: -C). Add these key pairs to their respective hosts in the ssh config file (they are called IdentityFiles in the configuration syntax).
    - Now add the ssh key to your GitHub account in order to allow you to use it for git authentication. [Here](https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/) is a guide which explains how to do this. Afterwards, test it by cloning a private Orakeltjenesten repository you have access to, but remember to use the ssh repository link and not the https one. If you have done everything correctly, you should neither be prompted for a username, nor a password. The ssh key shown on the GitHub "SSH and GDP keys" should now tell you that it has just been used. Make sure it does.

## Deploying the site
- 
